openapi: 3.0.2
tags:
  - name: ActorModel
    x-displayName: Actor
    description: |
      This is a description
      <SchemaDefinition schemaRef="#/components/schemas/Actor"/>
  - name: Actors
  - name: AskModel
    x-displayName: Ask
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Ask"/>
  - name: BlockHeaderModel
    x-displayName: BlockHeader
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/BlockHeader"/>
  - name: BlockModel
    x-displayName: Block
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Block"/>
  - name: Blocks
  - name: ChannelModel
    x-displayName: Channel
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Channel"/>
  - name: DealModel
    x-displayName: Deal
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Deal"/>
  - name: ExecutedMessageModel
    x-displayName: ExecutedMessage
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/ExecutedMessage"/>
  - name: MessageModel
    x-displayName: Message
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Message"/>
  - name: Messages
  - name: Node
  - name: NodeModel
    x-displayName: Node
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Node"/>
  - name: TipsetModel
    x-displayName: Tipset
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Tipset"/>
  - name: Tipsets
  - name: VoucherModel
    x-displayName: Voucher
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Voucher"/>
x-tagGroups:
  - name: Chain Resources
    tags:
      - Tipsets
      - Blocks
      - Messages
  - name: Actor Endpoints
    tags:
      - Actors
      - Channels
  - name: Node Control Endpoints
    tags:
      - Node
      - Address
      - Pieces
  - name: Storage Market Endpoints
    tags:
      - Asks
      - Deals
  - name: Models
    tags:
      - ActorModel
      - AskModel
      - BlockModel
      - BlockHeaderModel
      - ChannelModel
      - DealModel
      - ExecutedMessageModel
      - MessageModel
      - NodeModel
      - TipsetModel
      - VoucherModel
info:
  title: Filecoin JSON REST API
  description: Filecoin JSON REST API Description
  version: 0.1.0
  contact: 
    name: Filecoin JSON REST API SPEC
    email: erik.ingenito@protocol.ai
servers:
- url: http://127.0.0.1:3453/api/chain/v0
components:
  schemas:
    Actor: 
      $ref: 'actors.yml#/models/Actor'
    Ask:
      $ref: 'market.yml#/models/Ask'
    Block:
      $ref: 'chain.yml#/models/Block'
    BlockHeader:
      $ref: 'chain.yml#/models/BlockHeader'
    Channel:
      $ref: 'channels.yml#/models/Channel'
    Deal:
      $ref: 'market.yml#/models/Deal'
    ExecutedMessage:
      $ref: 'chain.yml#/models/ExecutedMessage'
    Message:
      $ref: 'chain.yml#/models/Message'
    Tipset:
      $ref: 'chain.yml#/models/Tipset'
    Voucher:
      $ref: 'channels.yml#/models/Voucher'
    PieceMetadata: 
      type: object
      properties:
        id: 
          type: string
          example: QmQXJPWYEnt9GoYu5SXkrKMWovCX78YBjFzRSJF63Zobnj
          readOnly: true
    Sector:
      type: object
      properties:
        id:
          type: string
        commR:
          type: string
    PeerAddresses: 
      type: array
      description: List of peer (network) addresses
      items:
        type: string
        example: /ip4/127.0.0.1/tcp/6000/ipfs/QmeGwW4Nm543yYe5gchbETzzpcUJsPc7xtLkj7g5GCmMLq
    Node:
      type: object
      properties:
        kind:
          type: string
          enum: [node]
          readOnly: true
        id: 
          type: string
          example: QmeGwW4Nm543yYe5gchbETzzpcUJsPc7xtLkj7g5GCmMLq
        addresses:
          $ref: '#/components/schemas/PeerAddresses'
        version:
          type: string
          example: "1.0.2"
        commit:
          type: string
          example: "93540266a2a9972e91947a538ce70dc9c4e8077e"
        protocol:
          type: object
          properties:
            autoSealInterval: 
              type: number
              description: Auto-Seal Interval in Seconds
            sectorSizes:
              type: array
              description: Supoorted sector sizes in bytes
              items:
                type: number 
        bitswapStats:
          type: object
          properties:
            blocksReceived: 
              type: number
            blocksSent: 
              type: number
            dataReceived: 
              type: number
            dataSent: 
              type: number
            dupBlksReceived:
              type: number
            dupDataReceived: 
              type: number
            messagesReceived: 
              type: number
            ProvideBufLen: 
              type: number
            peers:
              type: array
              description: Filecoin Addresses of currently connected peers
              items:
                type: string
                example: 'QmUA8TXLxsfuifpyHPxGfwWgXSCr6omqb6bdQy2KwWQCBz'
            wantlist:
              type: array
              description: CIDs of currently desired content blocks
              items:
                type: string
                example: 'QmQXJPWYEnt9GoYu5SXkrKMWovCX78YBjFzRSJF63Zobnj'
        config:
          type: object
          description: Full JSON representation of the node's current configuration
paths:
  /actors:
    $ref: './actors.yml#/endpoints/actors_collection'
  /actors/{actorId}:
    $ref: './actors.yml#/endpoints/actor_resource'
  /chain/tipsets:
    $ref: './chain.yml#/endpoints/tipsets_collection'
  /chain/tipsets/{tipsetId}:
    $ref: './chain.yml#/endpoints/tipset_resource'
  /chain/blocks/{blockId}:
    $ref: './chain.yml#/endpoints/block_resource'
  /chain/messages:
    $ref: './chain.yml#/endpoints/messages_collection'
  /chain/messages/{messageId}:
    $ref: './chain.yml#/endpoints/message_resource'
  /chain/executed-messages/{executedMessageId}:
    $ref: './chain.yml#/endpoints/executed_message_resource'
  /control/node:
    get:
      operationId: getNode
      summary: Return Node information
      description: Get information about the current Filecoin Node.
      tags:
        - Node
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Node'
  /control/pieces:
    post:
      operationId: createPiece
      summary: Add a Piece to local storage
      description: This method imports data into the local node's temporary storage so that it can be transferred to a storage miner.  
      tags: 
        - Pieces
      requestBody:
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PieceMetadata'
  /control/pieces/{pieceId}:
    get:
      operationId: getPieceById
      summary: Fetch piece data 
      description: Fetch piece data from the local node's temporary storage.
      tags:
        - Pieces
      parameters: 
      - name: pieceId
        in: path
        description: ID of the piece previously returned by corresponding createPiece POST method. 
        required: true
        schema:
          type: string
      responses:
        200:
          description: If the request succeeds, the server returns the original data used to create the piece.
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
                description: The raw bytes of the originally imported data.
  /actors/channels/{channelId}/redeem:
    $ref: 'channels.yml#/endpoints/channel_resource_redeem'
  /actors/channels/{channelId}/vouchers:
    $ref: 'channels.yml#/endpoints/channel_resource_vouchers'
  /channels:
    $ref: 'channels.yml#/endpoints/channels_collection'
  /channels/{channelId}: # Right now it's not possible to look up Channels by ID alone, only by Payee/ID, channel ID could just be a concatenation
    $ref: 'channels.yml#/endpoints/channel_resource'
  /channels/{channelId}/close:
    $ref: 'channels.yml#/endpoints/channel_resource_close'
  /channels/{channelId}/cancel:
    $ref: 'channels.yml#/endpoints/channel_resource_cancel'
  /channels/{channelId}/reclaim:
    $ref: 'channels.yml#/endpoints/channel_resource_reclaim'
  /market/asks:
    $ref: 'market.yml#/endpoints/asks_collection'
  /market/asks/{askId}:
    $ref: 'market.yml#/endpoints/ask_resource'
  /market/deals:
    $ref: 'market.yml#/endpoints/deals_collection'
